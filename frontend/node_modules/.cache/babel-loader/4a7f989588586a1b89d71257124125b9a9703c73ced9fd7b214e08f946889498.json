{"ast":null,"code":"import React from'react';import{Navigate,useLocation}from'react-router-dom';import{useAuth}from'../context/AuthContext';import{jsx as _jsx,jsxs as _jsxs}from\"react/jsx-runtime\";const ProtectedRoute=_ref=>{let{children,allowedRoles}=_ref;const{user,loading,isAuthenticated}=useAuth();const location=useLocation();if(loading){return/*#__PURE__*/_jsx(\"div\",{className:\"min-h-screen flex items-center justify-center bg-gray-100\",children:/*#__PURE__*/_jsxs(\"div\",{className:\"flex flex-col items-center\",children:[/*#__PURE__*/_jsx(\"div\",{className:\"w-12 h-12 border-4 border-primary-500 border-t-transparent rounded-full animate-spin\"}),/*#__PURE__*/_jsx(\"p\",{className:\"mt-4 text-gray-600\",children:\"Loading...\"})]})});}if(!isAuthenticated){return/*#__PURE__*/_jsx(Navigate,{to:\"/login\",state:{from:location},replace:true});}if(allowedRoles&&!allowedRoles.includes(user===null||user===void 0?void 0:user.role)){// Redirect to appropriate dashboard based on role\nconst dashboardRoutes={admin:'/admin',teacher:'/teacher',student:'/student'};return/*#__PURE__*/_jsx(Navigate,{to:dashboardRoutes[user===null||user===void 0?void 0:user.role]||'/login',replace:true});}return children;};export default ProtectedRoute;","map":{"version":3,"names":["React","Navigate","useLocation","useAuth","jsx","_jsx","jsxs","_jsxs","ProtectedRoute","_ref","children","allowedRoles","user","loading","isAuthenticated","location","className","to","state","from","replace","includes","role","dashboardRoutes","admin","teacher","student"],"sources":["C:/Users/harsh/Downloads/finalpro/frontend/src/components/ProtectedRoute.jsx"],"sourcesContent":["import React from 'react';\r\nimport { Navigate, useLocation } from 'react-router-dom';\r\nimport { useAuth } from '../context/AuthContext';\r\n\r\nconst ProtectedRoute = ({ children, allowedRoles }) => {\r\n    const { user, loading, isAuthenticated } = useAuth();\r\n    const location = useLocation();\r\n\r\n    if (loading) {\r\n        return (\r\n            <div className=\"min-h-screen flex items-center justify-center bg-gray-100\">\r\n                <div className=\"flex flex-col items-center\">\r\n                    <div className=\"w-12 h-12 border-4 border-primary-500 border-t-transparent rounded-full animate-spin\"></div>\r\n                    <p className=\"mt-4 text-gray-600\">Loading...</p>\r\n                </div>\r\n            </div>\r\n        );\r\n    }\r\n\r\n    if (!isAuthenticated) {\r\n        return <Navigate to=\"/login\" state={{ from: location }} replace />;\r\n    }\r\n\r\n    if (allowedRoles && !allowedRoles.includes(user?.role)) {\r\n        // Redirect to appropriate dashboard based on role\r\n        const dashboardRoutes = {\r\n            admin: '/admin',\r\n            teacher: '/teacher',\r\n            student: '/student'\r\n        };\r\n        return <Navigate to={dashboardRoutes[user?.role] || '/login'} replace />;\r\n    }\r\n\r\n    return children;\r\n};\r\n\r\nexport default ProtectedRoute;\r\n"],"mappings":"AAAA,MAAO,CAAAA,KAAK,KAAM,OAAO,CACzB,OAASC,QAAQ,CAAEC,WAAW,KAAQ,kBAAkB,CACxD,OAASC,OAAO,KAAQ,wBAAwB,CAAC,OAAAC,GAAA,IAAAC,IAAA,CAAAC,IAAA,IAAAC,KAAA,yBAEjD,KAAM,CAAAC,cAAc,CAAGC,IAAA,EAAgC,IAA/B,CAAEC,QAAQ,CAAEC,YAAa,CAAC,CAAAF,IAAA,CAC9C,KAAM,CAAEG,IAAI,CAAEC,OAAO,CAAEC,eAAgB,CAAC,CAAGX,OAAO,CAAC,CAAC,CACpD,KAAM,CAAAY,QAAQ,CAAGb,WAAW,CAAC,CAAC,CAE9B,GAAIW,OAAO,CAAE,CACT,mBACIR,IAAA,QAAKW,SAAS,CAAC,2DAA2D,CAAAN,QAAA,cACtEH,KAAA,QAAKS,SAAS,CAAC,4BAA4B,CAAAN,QAAA,eACvCL,IAAA,QAAKW,SAAS,CAAC,sFAAsF,CAAM,CAAC,cAC5GX,IAAA,MAAGW,SAAS,CAAC,oBAAoB,CAAAN,QAAA,CAAC,YAAU,CAAG,CAAC,EAC/C,CAAC,CACL,CAAC,CAEd,CAEA,GAAI,CAACI,eAAe,CAAE,CAClB,mBAAOT,IAAA,CAACJ,QAAQ,EAACgB,EAAE,CAAC,QAAQ,CAACC,KAAK,CAAE,CAAEC,IAAI,CAAEJ,QAAS,CAAE,CAACK,OAAO,MAAE,CAAC,CACtE,CAEA,GAAIT,YAAY,EAAI,CAACA,YAAY,CAACU,QAAQ,CAACT,IAAI,SAAJA,IAAI,iBAAJA,IAAI,CAAEU,IAAI,CAAC,CAAE,CACpD;AACA,KAAM,CAAAC,eAAe,CAAG,CACpBC,KAAK,CAAE,QAAQ,CACfC,OAAO,CAAE,UAAU,CACnBC,OAAO,CAAE,UACb,CAAC,CACD,mBAAOrB,IAAA,CAACJ,QAAQ,EAACgB,EAAE,CAAEM,eAAe,CAACX,IAAI,SAAJA,IAAI,iBAAJA,IAAI,CAAEU,IAAI,CAAC,EAAI,QAAS,CAACF,OAAO,MAAE,CAAC,CAC5E,CAEA,MAAO,CAAAV,QAAQ,CACnB,CAAC,CAED,cAAe,CAAAF,cAAc","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}