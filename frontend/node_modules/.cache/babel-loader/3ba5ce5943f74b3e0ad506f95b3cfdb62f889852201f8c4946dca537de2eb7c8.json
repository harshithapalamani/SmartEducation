{"ast":null,"code":"import axios from'axios';const API_BASE_URL=process.env.REACT_APP_API_URL||'http://localhost:5000/api';const api=axios.create({baseURL:API_BASE_URL,headers:{'Content-Type':'application/json'}});// Request interceptor to add auth token\napi.interceptors.request.use(config=>{const token=localStorage.getItem('token');if(token){config.headers.Authorization=\"Bearer \".concat(token);}return config;},error=>{return Promise.reject(error);});// Response interceptor for error handling\napi.interceptors.response.use(response=>response,error=>{var _error$response;if(((_error$response=error.response)===null||_error$response===void 0?void 0:_error$response.status)===401){localStorage.removeItem('token');localStorage.removeItem('user');window.location.href='/login';}return Promise.reject(error);});// Auth API\nexport const authAPI={login:credentials=>api.post('/auth/login',credentials),getMe:()=>api.get('/auth/me'),logout:()=>api.post('/auth/logout')};// Users API (Admin only)\nexport const usersAPI={getAll:()=>api.get('/users'),getByRole:role=>api.get(\"/users/role/\".concat(role)),create:userData=>api.post('/users',userData),delete:id=>api.delete(\"/users/\".concat(id)),getStats:()=>api.get('/users/stats')};// Chat API (Student only)\nexport const chatAPI={sendMessage:message=>api.post('/chat/message',{message}),getHistory:()=>api.get('/chat/history'),clearHistory:()=>api.delete('/chat/history')};// Materials API\nexport const materialsAPI={// Get all materials with optional filters\ngetAll:function(){let params=arguments.length>0&&arguments[0]!==undefined?arguments[0]:{};return api.get('/materials',{params});},// Get material by ID\ngetById:id=>api.get(\"/materials/\".concat(id)),// Upload text material (Teacher/Admin)\nupload:data=>api.post('/materials',data),// Upload PDF material (Teacher/Admin)\nuploadPDF:data=>api.post('/materials/pdf',data),// Update material (Teacher/Admin)\nupdate:(id,data)=>api.put(\"/materials/\".concat(id),data),// Delete material (Teacher/Admin)\ndelete:id=>api.delete(\"/materials/\".concat(id)),// Get my uploaded materials (Teacher/Admin)\ngetMyMaterials:function(){let params=arguments.length>0&&arguments[0]!==undefined?arguments[0]:{};return api.get('/materials/user/my',{params});},// Get all subjects\ngetSubjects:()=>api.get('/materials/subjects'),// Get topics for a subject\ngetTopics:subject=>api.get(\"/materials/topics/\".concat(encodeURIComponent(subject))),// Get processing status\ngetStatus:id=>api.get(\"/materials/\".concat(id,\"/status\"))};// Doubts API (Student)\nexport const doubtsAPI={// Submit a doubt and get AI answer\nsubmit:data=>api.post('/doubts',data),// Get doubt by ID\ngetById:id=>api.get(\"/doubts/\".concat(id)),// Get my doubts history\ngetMyDoubts:function(){let params=arguments.length>0&&arguments[0]!==undefined?arguments[0]:{};return api.get('/doubts/my',{params});},// Search materials before asking\nsearchMaterials:data=>api.post('/doubts/search-materials',data),// Get available subjects\ngetSubjects:()=>api.get('/doubts/subjects'),// Get topics for a subject\ngetTopics:subject=>api.get(\"/doubts/topics/\".concat(encodeURIComponent(subject))),// Get stats\ngetStats:()=>api.get('/doubts/stats')};export default api;","map":{"version":3,"names":["axios","API_BASE_URL","process","env","REACT_APP_API_URL","api","create","baseURL","headers","interceptors","request","use","config","token","localStorage","getItem","Authorization","concat","error","Promise","reject","response","_error$response","status","removeItem","window","location","href","authAPI","login","credentials","post","getMe","get","logout","usersAPI","getAll","getByRole","role","userData","delete","id","getStats","chatAPI","sendMessage","message","getHistory","clearHistory","materialsAPI","params","arguments","length","undefined","getById","upload","data","uploadPDF","update","put","getMyMaterials","getSubjects","getTopics","subject","encodeURIComponent","getStatus","doubtsAPI","submit","getMyDoubts","searchMaterials"],"sources":["C:/Users/harsh/Downloads/finalpro/frontend/src/services/api.js"],"sourcesContent":["import axios from 'axios';\r\n\r\nconst API_BASE_URL = process.env.REACT_APP_API_URL || 'http://localhost:5000/api';\r\n\r\nconst api = axios.create({\r\n  baseURL: API_BASE_URL,\r\n  headers: {\r\n    'Content-Type': 'application/json'\r\n  }\r\n});\r\n\r\n// Request interceptor to add auth token\r\napi.interceptors.request.use(\r\n  (config) => {\r\n    const token = localStorage.getItem('token');\r\n    if (token) {\r\n      config.headers.Authorization = `Bearer ${token}`;\r\n    }\r\n    return config;\r\n  },\r\n  (error) => {\r\n    return Promise.reject(error);\r\n  }\r\n);\r\n\r\n// Response interceptor for error handling\r\napi.interceptors.response.use(\r\n  (response) => response,\r\n  (error) => {\r\n    if (error.response?.status === 401) {\r\n      localStorage.removeItem('token');\r\n      localStorage.removeItem('user');\r\n      window.location.href = '/login';\r\n    }\r\n    return Promise.reject(error);\r\n  }\r\n);\r\n\r\n// Auth API\r\nexport const authAPI = {\r\n  login: (credentials) => api.post('/auth/login', credentials),\r\n  getMe: () => api.get('/auth/me'),\r\n  logout: () => api.post('/auth/logout')\r\n};\r\n\r\n// Users API (Admin only)\r\nexport const usersAPI = {\r\n  getAll: () => api.get('/users'),\r\n  getByRole: (role) => api.get(`/users/role/${role}`),\r\n  create: (userData) => api.post('/users', userData),\r\n  delete: (id) => api.delete(`/users/${id}`),\r\n  getStats: () => api.get('/users/stats')\r\n};\r\n\r\n// Chat API (Student only)\r\nexport const chatAPI = {\r\n  sendMessage: (message) => api.post('/chat/message', { message }),\r\n  getHistory: () => api.get('/chat/history'),\r\n  clearHistory: () => api.delete('/chat/history')\r\n};\r\n\r\n// Materials API\r\nexport const materialsAPI = {\r\n  // Get all materials with optional filters\r\n  getAll: (params = {}) => api.get('/materials', { params }),\r\n  // Get material by ID\r\n  getById: (id) => api.get(`/materials/${id}`),\r\n  // Upload text material (Teacher/Admin)\r\n  upload: (data) => api.post('/materials', data),\r\n  // Upload PDF material (Teacher/Admin)\r\n  uploadPDF: (data) => api.post('/materials/pdf', data),\r\n  // Update material (Teacher/Admin)\r\n  update: (id, data) => api.put(`/materials/${id}`, data),\r\n  // Delete material (Teacher/Admin)\r\n  delete: (id) => api.delete(`/materials/${id}`),\r\n  // Get my uploaded materials (Teacher/Admin)\r\n  getMyMaterials: (params = {}) => api.get('/materials/user/my', { params }),\r\n  // Get all subjects\r\n  getSubjects: () => api.get('/materials/subjects'),\r\n  // Get topics for a subject\r\n  getTopics: (subject) => api.get(`/materials/topics/${encodeURIComponent(subject)}`),\r\n  // Get processing status\r\n  getStatus: (id) => api.get(`/materials/${id}/status`)\r\n};\r\n\r\n// Doubts API (Student)\r\nexport const doubtsAPI = {\r\n  // Submit a doubt and get AI answer\r\n  submit: (data) => api.post('/doubts', data),\r\n  // Get doubt by ID\r\n  getById: (id) => api.get(`/doubts/${id}`),\r\n  // Get my doubts history\r\n  getMyDoubts: (params = {}) => api.get('/doubts/my', { params }),\r\n  // Search materials before asking\r\n  searchMaterials: (data) => api.post('/doubts/search-materials', data),\r\n  // Get available subjects\r\n  getSubjects: () => api.get('/doubts/subjects'),\r\n  // Get topics for a subject\r\n  getTopics: (subject) => api.get(`/doubts/topics/${encodeURIComponent(subject)}`),\r\n  // Get stats\r\n  getStats: () => api.get('/doubts/stats')\r\n};\r\n\r\nexport default api;\r\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}